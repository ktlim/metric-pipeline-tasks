description: Compute metrics from matched catalogs
tasks:
  matchCatalogs: MatchedCatalogs.MatchedCatalogTask
  PA1:
    class: MatchedCatalogsAnalysis.MatchedCatalogAnalysisTask
    config:
      connections.package: validate_drp
      connections.metric: PA1
      python: |
        from MatchedCatalogMeasureTasks import PA1Task
        config.measure.retarget(PA1Task)
        config.measure.brightSnrMin = 50.0
  TE1:
    class: MatchedCatalogsAnalysis.MatchedCatalogAnalysisTask
    config:
      connections.package: validate_drp
      connections.metric: TE1
      python: |
        from MeasureTasks import TExTask
        config.measure.retarget(TExTask)
        config.measure.annulus_r = 1.0
        config.measure.comparison_operator = "<="
  TE2:
    class: MatchedCatalogsAnalysis.MatchedCatalogAnalysisTask
    config:
      connections.package: validate_drp
      connections.metric: TE2
      python: |
        from MeasureTasks import TExTask
        config.measure.retarget(TExTask)
        config.measure.annulus_r = 5.0
        config.measure.comparison_operator = ">="
  nsrcMeas:
    class: MatchedCatalogsAnalysis.MatchedCatalogAnalysisTask
    config:
      connections.package: info
      connections.metric: nsrcMeas
      python: |
        from MatchedCatalogMeasureTasks import NumSourcesTask
        config.measure.retarget(NumSourcesTask)
  agg_mean_PA1:
    class: MatchedCatalogsAggregation.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: PA1
      connections.agg_name: Mean
  agg_median_PA1:
    class: MatchedCatalogsAggregation.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: PA1
      connections.agg_name: Median
  agg_mean_TE1:
    class: MatchedCatalogsAggregation.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: TE1
      connections.agg_name: Mean
  agg_mean_TE2:
    class: MatchedCatalogsAggregation.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: TE2
      connections.agg_name: Mean
  agg_sum_nsrc:
    class: MatchedCatalogsAggregation.MatchedCatalogsAggregationTask
    config:
      connections.package: info
      connections.metric: nsrcMeas
      connections.agg_name: Sum
