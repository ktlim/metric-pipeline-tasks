description: Compute aggregate metrics from a list of individual measurements
tasks:
  agg_mean_PA1:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: PA1
      connections.agg_name: Mean
  agg_mean_AM1:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      # The special agg_name summary defaults to median.
      # It can be changed via the config.
      # This is an example of how to change it.
      # It must be a valid atribute of the numpy package.
      connections.package: info
      connections.metric: AM1
      connections.agg_name: summary
      python: |
        config.agg.summary = 'mean'
  agg_median_AM1_hist:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AM1
      connections.agg_name: hist_median
      python: |
        from metric_pipeline_tasks import HistMedianTask
        config.agg.retarget(HistMedianTask)
  agg_summary_AM1:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AM1
      connections.agg_name: summary
  agg_summary_AM2:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AM2
      connections.agg_name: summary
  agg_summary_AM3:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AM3
      connections.agg_name: summary
  agg_summary_AD1_design:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AD1_design
      connections.agg_name: summary
  agg_summary_AF1_design:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AF1_design
      connections.agg_name: summary
  agg_summary_AD2_design:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AD2_design
      connections.agg_name: summary
  agg_summary_AF2_design:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AF2_design
      connections.agg_name: summary
  agg_summary_AD3_design:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AD3_design
      connections.agg_name: summary
  agg_summary_AF3_design:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: AF3_design
      connections.agg_name: summary
  agg_summary_PA1:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: PA1
      connections.agg_name: summary
  agg_summary_PA2:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: PA2_design_gri
      connections.agg_name: summary
  agg_summary_PF1:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: PF1_design_gri
      connections.agg_name: summary
  agg_summary_TE1:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: TE1
      connections.agg_name: summary
  agg_summary_TE2:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: validate_drp
      connections.metric: TE2
      connections.agg_name: summary
  agg_sum_nsrc:
    class: metric_pipeline_tasks.MatchedCatalogsAggregationTask
    config:
      connections.package: info
      connections.metric: nsrcMeas
      connections.agg_name: Sum
